{
  "version": 4,
  "terraform_version": "1.3.9",
  "serial": 1066,
  "lineage": "4d755953-3c8e-1760-e6f5-e8bb94a8a6fc",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "add_item_lambda_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "128017235",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:*\",\n      \"Resource\": \"arn:aws:dynamodb:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "close_cart_lambda_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "128017235",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:*\",\n      \"Resource\": \"arn:aws:dynamodb:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "get_cart_lambda_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "128017235",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:*\",\n      \"Resource\": \"arn:aws:dynamodb:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "open_cart_lambda_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "128017235",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"dynamodb:*\",\n      \"Resource\": \"arn:aws:dynamodb:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_base64sha256": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "output_file_mode": null,
            "output_md5": "c3a233646ca990544c38e7ce39811d38",
            "output_path": "./packaged_functions/add_item.zip",
            "output_sha": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_size": 7604,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../app",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/add_item",
            "id": "/aws/lambda/add_item",
            "kms_key_id": "",
            "name": "/aws/lambda/add_item",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/add_item-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/add_item-custom-policy-doc",
            "name": "add_item-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"dynamodb:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JH63NWHF37",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.add_item_lambda_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/add_item_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/add_item_log_policy",
            "name": "add_item_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JCACDJK3MK",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.add_item.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/add_item-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-25T14:08:38Z",
            "description": "",
            "force_detach_policies": false,
            "id": "add_item-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/add_item-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/add_item_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "add_item-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JEGXVXEUSL"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.add_item.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "add_item-role-for-lambda-20230325140839393000000005",
            "policy_arn": "arn:aws:iam::311476293586:policy/add_item-custom-policy-doc",
            "role": "add_item-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.add_item_lambda_policy_data",
            "module.add_item.aws_iam_policy.lambda_custom_policy",
            "module.add_item.aws_iam_role.iam_for_lambda",
            "module.add_item.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "add_item-role-for-lambda-20230325140839191400000004",
            "policy_arn": "arn:aws:iam::311476293586:policy/add_item_log_policy",
            "role": "add_item-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.add_item.aws_iam_policy.log_policy",
            "module.add_item.aws_iam_role.iam_for_lambda",
            "module.add_item.data.aws_iam_policy_document.assume_role",
            "module.add_item.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.add_item",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:add_item",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/add_item.zip",
            "function_name": "add_item",
            "handler": "functions/add_item/main.handler",
            "id": "add_item",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:add_item/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-04-23T19:42:19.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:add_item:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:add_item:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/add_item-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "source_code_size": 7604,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.add_item.aws_iam_role.iam_for_lambda",
            "module.add_item.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_and_kinesis_document",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3662389234",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kinesis:ListStreams\",\n        \"kinesis:ListShards\",\n        \"kinesis:GetShardIterator\",\n        \"kinesis:GetRecords\",\n        \"kinesis:DescribeStream\"\n      ],\n      \"Resource\": \"arn:aws:kinesis:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kinesis:DescribeStream",
                  "kinesis:GetRecords",
                  "kinesis:GetShardIterator",
                  "kinesis:ListShards",
                  "kinesis:ListStreams"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:kinesis:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "s3_logger_permissions_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1891926602",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3::*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_and_kinesis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/all_lambda_and_kinesis",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/all_lambda_and_kinesis",
            "name": "all_lambda_and_kinesis",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"kinesis:ListStreams\",\"kinesis:ListShards\",\"kinesis:GetShardIterator\",\"kinesis:GetRecords\",\"kinesis:DescribeStream\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:kinesis:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JL2CKHEZX5",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_kinesis_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "store-events-role-for-lambda-20230325140839515500000008",
            "policy_arn": "arn:aws:iam::311476293586:policy/all_lambda_and_kinesis",
            "role": "store-events-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_iam_policy.lambda_and_kinesis",
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "aws_kinesis_stream",
      "name": "all-event-stream",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream",
            "encryption_type": "NONE",
            "enforce_consumer_deletion": false,
            "id": "arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream",
            "kms_key_id": "",
            "name": "all-event_stream",
            "retention_period": 24,
            "shard_count": 1,
            "shard_level_metrics": [],
            "stream_mode_details": [
              {
                "stream_mode": "PROVISIONED"
              }
            ],
            "tags": {},
            "tags_all": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6NzIwMDAwMDAwMDAwMCwidXBkYXRlIjo3MjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "aws_lambda_event_source_mapping",
      "name": "mapping",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "amazon_managed_kafka_event_source_config": [],
            "batch_size": 100,
            "bisect_batch_on_function_error": false,
            "destination_config": [
              {
                "on_failure": [
                  {
                    "destination_arn": null
                  }
                ]
              }
            ],
            "enabled": true,
            "event_source_arn": "arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream",
            "filter_criteria": [],
            "function_arn": "arn:aws:lambda:us-east-1:311476293586:function:store-events",
            "function_name": "arn:aws:lambda:us-east-1:311476293586:function:store-events",
            "function_response_types": [],
            "id": "2b84b3cf-2c9f-47b4-b1e2-0e0205529b0f",
            "last_modified": "2023-03-25T14:52:00Z",
            "last_processing_result": "OK",
            "maximum_batching_window_in_seconds": 0,
            "maximum_record_age_in_seconds": -1,
            "maximum_retry_attempts": -1,
            "parallelization_factor": 1,
            "queues": [],
            "scaling_config": [],
            "self_managed_event_source": [],
            "self_managed_kafka_event_source_config": [],
            "source_access_configuration": [],
            "starting_position": "LATEST",
            "starting_position_timestamp": "",
            "state": "Enabled",
            "state_transition_reason": "User action",
            "topics": [],
            "tumbling_window_in_seconds": 0,
            "uuid": "2b84b3cf-2c9f-47b4-b1e2-0e0205529b0f"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_kinesis_stream.all-event-stream"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "event-storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::all-c4739278-f8a1-fe83-3f32-7c1ae29198d3",
            "bucket": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3",
            "bucket_domain_name": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "6d3f837c2151373365d64b2da2fc9a11918884a90c6af13d3e4289749a81ea56",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.all_event_stream.random_uuid.uuid"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream",
      "mode": "managed",
      "type": "random_uuid",
      "name": "uuid",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "c4739278-f8a1-fe83-3f32-7c1ae29198d3",
            "keepers": null,
            "result": "c4739278-f8a1-fe83-3f32-7c1ae29198d3"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "285dd7988f5d6ade629703af25baa357310fb60f",
            "output_base64sha256": "F8yvOuPTJRMjqT/w4iAaNTH30yBOgdQWREq2pyKGdlE=",
            "output_file_mode": null,
            "output_md5": "28e6d04feb3c11332f5328887e9907cf",
            "output_path": "./packaged_functions/store-events.zip",
            "output_sha": "285dd7988f5d6ade629703af25baa357310fb60f",
            "output_size": 496,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "event_stream/scripts/store_events",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/store-events",
            "id": "/aws/lambda/store-events",
            "kms_key_id": "",
            "name": "/aws/lambda/store-events",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/store-events-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/store-events-custom-policy-doc",
            "name": "store-events-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"s3:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3::*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JJFIFWSG2S",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/store-events_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/store-events_log_policy",
            "name": "store-events_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JFJ3HQKGDS",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/store-events-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-25T14:08:38Z",
            "description": "",
            "force_detach_policies": false,
            "id": "store-events-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/all_lambda_and_kinesis",
              "arn:aws:iam::311476293586:policy/store-events-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/store-events_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "store-events-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JBB7IYGFVT"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "store-events-role-for-lambda-2023032514083980920000000b",
            "policy_arn": "arn:aws:iam::311476293586:policy/store-events-custom-policy-doc",
            "role": "store-events-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.lambda_custom_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "store-events-role-for-lambda-20230325140839030600000003",
            "policy_arn": "arn:aws:iam::311476293586:policy/store-events_log_policy",
            "role": "store-events-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.module.function_store_event.aws_iam_policy.log_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.all_event_stream.module.function_store_event",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:store-events",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "s3_bucket_name": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/store-events.zip",
            "function_name": "store-events",
            "handler": "main.handler",
            "id": "store-events",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:store-events/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-03-26T13:02:09.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:store-events:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:store-events:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/store-events-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "F8yvOuPTJRMjqT/w4iAaNTH30yBOgdQWREq2pyKGdlE=",
            "source_code_size": 496,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.data.archive_file.lambda_archive",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.random_uuid.uuid"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_base64sha256": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "output_file_mode": null,
            "output_md5": "c3a233646ca990544c38e7ce39811d38",
            "output_path": "./packaged_functions/close_cart.zip",
            "output_sha": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_size": 7604,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../app",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/close_cart",
            "id": "/aws/lambda/close_cart",
            "kms_key_id": "",
            "name": "/aws/lambda/close_cart",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/close_cart-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/close_cart-custom-policy-doc",
            "name": "close_cart-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"dynamodb:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JEUFUW2OOI",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.close_cart_lambda_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/close_cart_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/close_cart_log_policy",
            "name": "close_cart_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JHOYYIQ5U3",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.close_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/close_cart-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-26T15:25:30Z",
            "description": "",
            "force_detach_policies": false,
            "id": "close_cart-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/close_cart-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/close_cart_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "close_cart-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JJJABSJPHT"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.close_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "close_cart-role-for-lambda-20230326152531586000000001",
            "policy_arn": "arn:aws:iam::311476293586:policy/close_cart-custom-policy-doc",
            "role": "close_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.close_cart_lambda_policy_data",
            "module.close_cart.aws_iam_policy.lambda_custom_policy",
            "module.close_cart.aws_iam_role.iam_for_lambda",
            "module.close_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "close_cart-role-for-lambda-20230326152531586100000002",
            "policy_arn": "arn:aws:iam::311476293586:policy/close_cart_log_policy",
            "role": "close_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.close_cart.aws_iam_policy.log_policy",
            "module.close_cart.aws_iam_role.iam_for_lambda",
            "module.close_cart.data.aws_iam_policy_document.assume_role",
            "module.close_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.close_cart",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:close_cart",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/close_cart.zip",
            "function_name": "close_cart",
            "handler": "functions/close_cart/main.handler",
            "id": "close_cart",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:close_cart/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-04-23T19:42:31.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:close_cart:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:close_cart:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/close_cart-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "source_code_size": 7604,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.close_cart.aws_iam_role.iam_for_lambda",
            "module.close_cart.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_base64sha256": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "output_file_mode": null,
            "output_md5": "c3a233646ca990544c38e7ce39811d38",
            "output_path": "./packaged_functions/event-logger.zip",
            "output_sha": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_size": 7604,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../app",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/event-logger",
            "id": "/aws/lambda/event-logger",
            "kms_key_id": "",
            "name": "/aws/lambda/event-logger",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/event-logger-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/event-logger-custom-policy-doc",
            "name": "event-logger-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"none:null\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"noop\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JBANE5QZGH",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/event-logger_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/event-logger_log_policy",
            "name": "event-logger_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JNHVSIG6P5",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.event_logger.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/event-logger-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-26T10:12:19Z",
            "description": "",
            "force_detach_policies": false,
            "id": "event-logger-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/event-logger-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/event-logger-stream-handler",
              "arn:aws:iam::311476293586:policy/event-logger_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "event-logger-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JEA3XO6ZX7"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.event_logger.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "event-logger-role-for-lambda-20230326111221619500000001",
            "policy_arn": "arn:aws:iam::311476293586:policy/event-logger-custom-policy-doc",
            "role": "event-logger-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "event-logger-role-for-lambda-20230326101220082700000001",
            "policy_arn": "arn:aws:iam::311476293586:policy/event-logger_log_policy",
            "role": "event-logger-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "event_storage_bucket_name": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/event-logger.zip",
            "function_name": "event-logger",
            "handler": "functions/event_logger/main.handler",
            "id": "event-logger",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:event-logger/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-04-23T19:42:07.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:event-logger:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/event-logger-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "source_code_size": 7604,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "event_stream_handler_document",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2835205156",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"kinesis\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kinesis:ListStreams\",\n        \"kinesis:ListShards\",\n        \"kinesis:GetShardIterator\",\n        \"kinesis:GetRecords\",\n        \"kinesis:DescribeStream\"\n      ],\n      \"Resource\": \"arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream\"\n    },\n    {\n      \"Sid\": \"sqs\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"SQS:*\",\n      \"Resource\": \"arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo\"\n    },\n    {\n      \"Sid\": \"s3\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kinesis:DescribeStream",
                  "kinesis:GetRecords",
                  "kinesis:GetShardIterator",
                  "kinesis:ListShards",
                  "kinesis:ListStreams"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream"
                ],
                "sid": "kinesis"
              },
              {
                "actions": [
                  "SQS:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo"
                ],
                "sid": "sqs"
              },
              {
                "actions": [
                  "s3:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3::*:*"
                ],
                "sid": "s3"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "replay_lambda_document",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3207993289",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3::*:*\"\n    },\n    {\n      \"Sid\": \"2\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"SQS:*\",\n      \"Resource\": \"arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:s3::*:*"
                ],
                "sid": "1"
              },
              {
                "actions": [
                  "SQS:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo"
                ],
                "sid": "2"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_and_kinesis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/event-logger-stream-handler",
            "description": "arn:aws:lambda:us-east-1:311476293586:function:event-logger Event Stream Handler",
            "id": "arn:aws:iam::311476293586:policy/event-logger-stream-handler",
            "name": "event-logger-stream-handler",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"kinesis:ListStreams\",\"kinesis:ListShards\",\"kinesis:GetShardIterator\",\"kinesis:GetRecords\",\"kinesis:DescribeStream\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream\",\"Sid\":\"kinesis\"},{\"Action\":\"SQS:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo\",\"Sid\":\"sqs\"},{\"Action\":\"s3:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3::*:*\",\"Sid\":\"s3\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JBMTD7WWBQ",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_iam_policy.lambda_and_kinesis",
            "module.all_event_stream.aws_iam_role_policy_attachment.lambda_kinesis_attachment",
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.all_event_stream.aws_lambda_event_source_mapping.mapping",
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document",
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data",
            "module.all_event_stream.module.function_store_event.aws_cloudwatch_log_group.lambda_log_group",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.lambda_custom_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.log_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_lambda_function.main",
            "module.all_event_stream.module.function_store_event.data.archive_file.lambda_archive",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue",
            "module.event_logger_event_handler.data.aws_iam_policy_document.event_stream_handler_document"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_kinesis_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "event-logger-role-for-lambda-20230326111227530800000003",
            "policy_arn": "arn:aws:iam::311476293586:policy/event-logger-stream-handler",
            "role": "event-logger-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_iam_policy.lambda_and_kinesis",
            "module.all_event_stream.aws_iam_role_policy_attachment.lambda_kinesis_attachment",
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.all_event_stream.aws_lambda_event_source_mapping.mapping",
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document",
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data",
            "module.all_event_stream.module.function_store_event.aws_cloudwatch_log_group.lambda_log_group",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.lambda_custom_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.log_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_lambda_function.main",
            "module.all_event_stream.module.function_store_event.data.archive_file.lambda_archive",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_iam_policy.lambda_and_kinesis",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue",
            "module.event_logger_event_handler.data.aws_iam_policy_document.event_stream_handler_document"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "managed",
      "type": "aws_lambda_event_source_mapping",
      "name": "mapping",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "amazon_managed_kafka_event_source_config": [],
            "batch_size": 100,
            "bisect_batch_on_function_error": false,
            "destination_config": [
              {
                "on_failure": [
                  {
                    "destination_arn": null
                  }
                ]
              }
            ],
            "enabled": true,
            "event_source_arn": "arn:aws:kinesis:us-east-1:311476293586:stream/all-event_stream",
            "filter_criteria": [],
            "function_arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger",
            "function_name": "arn:aws:lambda:us-east-1:311476293586:function:event-logger",
            "function_response_types": null,
            "id": "2a159568-1288-409d-bd70-67ed34471acc",
            "last_modified": "2023-04-23T19:42:00Z",
            "last_processing_result": "No records processed",
            "maximum_batching_window_in_seconds": 0,
            "maximum_record_age_in_seconds": -1,
            "maximum_retry_attempts": -1,
            "parallelization_factor": 1,
            "queues": null,
            "scaling_config": [],
            "self_managed_event_source": [],
            "self_managed_kafka_event_source_config": [],
            "source_access_configuration": [],
            "starting_position": "AT_TIMESTAMP",
            "starting_position_timestamp": "1985-01-01T00:00:00Z",
            "state": "Enabled",
            "state_transition_reason": "User action",
            "topics": null,
            "tumbling_window_in_seconds": 0,
            "uuid": "2a159568-1288-409d-bd70-67ed34471acc"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_iam_policy.lambda_and_kinesis",
            "module.all_event_stream.aws_iam_role_policy_attachment.lambda_kinesis_attachment",
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.all_event_stream.aws_lambda_event_source_mapping.mapping",
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document",
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data",
            "module.all_event_stream.module.function_store_event.aws_cloudwatch_log_group.lambda_log_group",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.lambda_custom_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.log_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_lambda_function.main",
            "module.all_event_stream.module.function_store_event.data.archive_file.lambda_archive",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "managed",
      "type": "aws_lambda_event_source_mapping",
      "name": "replay_queue_mapping",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "amazon_managed_kafka_event_source_config": [],
            "batch_size": 10,
            "bisect_batch_on_function_error": false,
            "destination_config": [],
            "enabled": true,
            "event_source_arn": "arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo",
            "filter_criteria": [],
            "function_arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger",
            "function_name": "arn:aws:lambda:us-east-1:311476293586:function:event-logger",
            "function_response_types": [],
            "id": "f5301429-4455-4600-8049-ca59f7872a58",
            "last_modified": "2023-03-26T11:25:11Z",
            "last_processing_result": "",
            "maximum_batching_window_in_seconds": 0,
            "maximum_record_age_in_seconds": 0,
            "maximum_retry_attempts": 0,
            "parallelization_factor": 0,
            "queues": [],
            "scaling_config": [],
            "self_managed_event_source": [],
            "self_managed_kafka_event_source_config": [],
            "source_access_configuration": [],
            "starting_position": "",
            "starting_position_timestamp": "",
            "state": "Enabled",
            "state_transition_reason": "USER_INITIATED",
            "topics": [],
            "tumbling_window_in_seconds": 0,
            "uuid": "f5301429-4455-4600-8049-ca59f7872a58"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler",
      "mode": "managed",
      "type": "aws_sqs_queue",
      "name": "replay_queue",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo",
            "content_based_deduplication": false,
            "deduplication_scope": "queue",
            "delay_seconds": 0,
            "fifo_queue": true,
            "fifo_throughput_limit": "perQueue",
            "id": "https://sqs.us-east-1.amazonaws.com/311476293586/event-logger-replay.fifo",
            "kms_data_key_reuse_period_seconds": 300,
            "kms_master_key_id": "",
            "max_message_size": 262144,
            "message_retention_seconds": 345600,
            "name": "event-logger-replay.fifo",
            "name_prefix": "",
            "policy": "",
            "receive_wait_time_seconds": 0,
            "redrive_allow_policy": "",
            "redrive_policy": "",
            "sqs_managed_sse_enabled": true,
            "tags": {},
            "tags_all": {},
            "url": "https://sqs.us-east-1.amazonaws.com/311476293586/event-logger-replay.fifo",
            "visibility_timeout_seconds": 30
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "295086be438bb8460dda4b07b1c23cdeed0ca60a",
            "output_base64sha256": "OOXpEWd6MNdBLc7Nu03Ea1kLYdDV28TpCxddkmGCjMA=",
            "output_file_mode": null,
            "output_md5": "6ec085137487d0a025444b5de27814fb",
            "output_path": "./packaged_functions/event-logger-replay-function.zip",
            "output_sha": "295086be438bb8460dda4b07b1c23cdeed0ca60a",
            "output_size": 373,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "event_stream_handler/scripts/replay",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/event-logger-replay-function",
            "id": "/aws/lambda/event-logger-replay-function",
            "kms_key_id": "",
            "name": "/aws/lambda/event-logger-replay-function",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/event-logger-replay-function-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/event-logger-replay-function-custom-policy-doc",
            "name": "event-logger-replay-function-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"s3:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3::*:*\",\"Sid\":\"1\"},{\"Action\":\"SQS:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:311476293586:event-logger-replay.fifo\",\"Sid\":\"2\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JO3YUBX3FL",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue",
            "module.event_logger_event_handler.data.aws_iam_policy_document.replay_lambda_document"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/event-logger-replay-function_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/event-logger-replay-function_log_policy",
            "name": "event-logger-replay-function_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JBAE36V6SG",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/event-logger-replay-function-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-26T11:12:26Z",
            "description": "",
            "force_detach_policies": false,
            "id": "event-logger-replay-function-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/event-logger-replay-function-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/event-logger-replay-function_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "event-logger-replay-function-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JDFACQNXYT"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "event-logger-replay-function-role-for-lambda-20230326111254254000000004",
            "policy_arn": "arn:aws:iam::311476293586:policy/event-logger-replay-function-custom-policy-doc",
            "role": "event-logger-replay-function-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue",
            "module.event_logger_event_handler.data.aws_iam_policy_document.replay_lambda_document",
            "module.event_logger_event_handler.module.replay_function.aws_iam_policy.lambda_custom_policy",
            "module.event_logger_event_handler.module.replay_function.aws_iam_role.iam_for_lambda",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "event-logger-replay-function-role-for-lambda-20230326111227443500000002",
            "policy_arn": "arn:aws:iam::311476293586:policy/event-logger-replay-function_log_policy",
            "role": "event-logger-replay-function-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.module.replay_function.aws_iam_policy.log_policy",
            "module.event_logger_event_handler.module.replay_function.aws_iam_role.iam_for_lambda",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.assume_role",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.event_logger_event_handler.module.replay_function",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger-replay-function",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "event_storage_bucket_name": "all-c4739278-f8a1-fe83-3f32-7c1ae29198d3",
                  "replay_queue_url": "https://sqs.us-east-1.amazonaws.com/311476293586/event-logger-replay.fifo"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/event-logger-replay-function.zip",
            "function_name": "event-logger-replay-function",
            "handler": "main.handler",
            "id": "event-logger-replay-function",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:event-logger-replay-function/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-03-26T13:47:07.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:event-logger-replay-function:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:event-logger-replay-function:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/event-logger-replay-function-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "OOXpEWd6MNdBLc7Nu03Ea1kLYdDV28TpCxddkmGCjMA=",
            "source_code_size": 373,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.all_event_stream.aws_iam_policy.lambda_and_kinesis",
            "module.all_event_stream.aws_iam_role_policy_attachment.lambda_kinesis_attachment",
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.all_event_stream.aws_lambda_event_source_mapping.mapping",
            "module.all_event_stream.aws_s3_bucket.event-storage",
            "module.all_event_stream.data.aws_iam_policy_document.lambda_and_kinesis_document",
            "module.all_event_stream.data.aws_iam_policy_document.s3_logger_permissions_data",
            "module.all_event_stream.module.function_store_event.aws_cloudwatch_log_group.lambda_log_group",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.lambda_custom_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_policy.log_policy",
            "module.all_event_stream.module.function_store_event.aws_iam_role.iam_for_lambda",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.all_event_stream.module.function_store_event.aws_lambda_function.main",
            "module.all_event_stream.module.function_store_event.data.archive_file.lambda_archive",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.assume_role",
            "module.all_event_stream.module.function_store_event.data.aws_iam_policy_document.log_policy_data",
            "module.all_event_stream.random_uuid.uuid",
            "module.event_logger.aws_cloudwatch_log_group.lambda_log_group",
            "module.event_logger.aws_iam_policy.lambda_custom_policy",
            "module.event_logger.aws_iam_policy.log_policy",
            "module.event_logger.aws_iam_role.iam_for_lambda",
            "module.event_logger.aws_iam_role_policy_attachment.lambda_custom_policy_attachment",
            "module.event_logger.aws_iam_role_policy_attachment.log_policy_attachment",
            "module.event_logger.aws_lambda_function.main",
            "module.event_logger.data.archive_file.lambda_archive",
            "module.event_logger.data.aws_iam_policy_document.assume_role",
            "module.event_logger.data.aws_iam_policy_document.log_policy_data",
            "module.event_logger_event_handler.aws_sqs_queue.replay_queue",
            "module.event_logger_event_handler.module.replay_function.aws_iam_role.iam_for_lambda",
            "module.event_logger_event_handler.module.replay_function.data.archive_file.lambda_archive",
            "module.event_logger_event_handler.module.replay_function.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_base64sha256": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "output_file_mode": null,
            "output_md5": "c3a233646ca990544c38e7ce39811d38",
            "output_path": "./packaged_functions/get_cart.zip",
            "output_sha": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_size": 7604,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../app",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/get_cart",
            "id": "/aws/lambda/get_cart",
            "kms_key_id": "",
            "name": "/aws/lambda/get_cart",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/get_cart-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/get_cart-custom-policy-doc",
            "name": "get_cart-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"dynamodb:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JN5OGVRAXE",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.get_cart_lambda_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/get_cart_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/get_cart_log_policy",
            "name": "get_cart_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JGF7K5EU7J",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.get_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/get_cart-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-25T14:08:37Z",
            "description": "",
            "force_detach_policies": false,
            "id": "get_cart-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/get_cart-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/get_cart_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "get_cart-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JMLX3TFYOD"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.get_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "get_cart-role-for-lambda-20230325140839401100000006",
            "policy_arn": "arn:aws:iam::311476293586:policy/get_cart-custom-policy-doc",
            "role": "get_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.get_cart_lambda_policy_data",
            "module.get_cart.aws_iam_policy.lambda_custom_policy",
            "module.get_cart.aws_iam_role.iam_for_lambda",
            "module.get_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "get_cart-role-for-lambda-20230325140838710600000001",
            "policy_arn": "arn:aws:iam::311476293586:policy/get_cart_log_policy",
            "role": "get_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.get_cart.aws_iam_policy.log_policy",
            "module.get_cart.aws_iam_role.iam_for_lambda",
            "module.get_cart.data.aws_iam_policy_document.assume_role",
            "module.get_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.get_cart",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:get_cart",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/get_cart.zip",
            "function_name": "get_cart",
            "handler": "functions/get_cart/main.handler",
            "id": "get_cart",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:get_cart/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-04-23T19:42:13.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:get_cart:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:get_cart:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/get_cart-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "source_code_size": 7604,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.get_cart.aws_iam_role.iam_for_lambda",
            "module.get_cart.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_base64sha256": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "output_file_mode": null,
            "output_md5": "c3a233646ca990544c38e7ce39811d38",
            "output_path": "./packaged_functions/open_cart.zip",
            "output_sha": "e86e992fa7deb48031f011d9ab6f49523f45fe8d",
            "output_size": 7604,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../app",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/open_cart",
            "id": "/aws/lambda/open_cart",
            "kms_key_id": "",
            "name": "/aws/lambda/open_cart",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/open_cart-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/open_cart-custom-policy-doc",
            "name": "open_cart-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"dynamodb:*\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JAFGXO34JS",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.open_cart_lambda_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/open_cart_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/open_cart_log_policy",
            "name": "open_cart_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JKNUUIHKEP",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.open_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/open_cart-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-25T14:08:37Z",
            "description": "",
            "force_detach_policies": false,
            "id": "open_cart-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/open_cart-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/open_cart_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "open_cart-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JFEJEKSMQL"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.open_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "open_cart-role-for-lambda-20230325140839450500000007",
            "policy_arn": "arn:aws:iam::311476293586:policy/open_cart-custom-policy-doc",
            "role": "open_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.open_cart_lambda_policy_data",
            "module.open_cart.aws_iam_policy.lambda_custom_policy",
            "module.open_cart.aws_iam_role.iam_for_lambda",
            "module.open_cart.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "open_cart-role-for-lambda-20230325140839030400000002",
            "policy_arn": "arn:aws:iam::311476293586:policy/open_cart_log_policy",
            "role": "open_cart-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.open_cart.aws_iam_policy.log_policy",
            "module.open_cart.aws_iam_role.iam_for_lambda",
            "module.open_cart.data.aws_iam_policy_document.assume_role",
            "module.open_cart.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.open_cart",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:open_cart",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/open_cart.zip",
            "function_name": "open_cart",
            "handler": "functions/open_cart/main.handler",
            "id": "open_cart",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:open_cart/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-04-23T19:42:25.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:open_cart:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:open_cart:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/open_cart-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "tehKr6ocXDUt6cC57yM7YQWVdISTPPdPJ6/DdqF9x20=",
            "source_code_size": 7604,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.open_cart.aws_iam_role.iam_for_lambda",
            "module.open_cart.data.archive_file.lambda_archive"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "dynamo_to_kinesis_lambda_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "526046170",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:ListStreams\",\n        \"dynamodb:GetShardIterator\",\n        \"dynamodb:GetRecords\",\n        \"dynamodb:DescribeStream\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:*:*:*\"\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kinesis:PutRecords\",\n        \"kinesis:PutRecord\"\n      ],\n      \"Resource\": \"arn:aws:kinesis:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:DescribeStream",
                  "dynamodb:GetRecords",
                  "dynamodb:GetShardIterator",
                  "dynamodb:ListStreams"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:*:*:*"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "kinesis:PutRecord",
                  "kinesis:PutRecords"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:kinesis:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.shopping-carts-table",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "es_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:311476293586:table/ShoppingCarts",
            "attribute": [
              {
                "name": "Uuid",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "Uuid",
            "id": "ShoppingCarts",
            "local_secondary_index": [],
            "name": "ShoppingCarts",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 1,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "arn:aws:dynamodb:us-east-1:311476293586:table/ShoppingCarts/stream/2023-03-25T14:08:37.460",
            "stream_enabled": true,
            "stream_label": "2023-03-25T14:08:37.460",
            "stream_view_type": "NEW_AND_OLD_IMAGES",
            "table_class": "",
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 1
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.shopping-carts-table",
      "mode": "managed",
      "type": "aws_lambda_event_source_mapping",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "amazon_managed_kafka_event_source_config": [],
            "batch_size": 100,
            "bisect_batch_on_function_error": false,
            "destination_config": [
              {
                "on_failure": [
                  {
                    "destination_arn": null
                  }
                ]
              }
            ],
            "enabled": true,
            "event_source_arn": "arn:aws:dynamodb:us-east-1:311476293586:table/ShoppingCarts/stream/2023-03-25T14:08:37.460",
            "filter_criteria": [],
            "function_arn": "arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter",
            "function_name": "arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter",
            "function_response_types": [],
            "id": "972e962e-1573-4b2c-b24c-14fa3347b641",
            "last_modified": "2023-03-25T14:13:00Z",
            "last_processing_result": "OK",
            "maximum_batching_window_in_seconds": 0,
            "maximum_record_age_in_seconds": -1,
            "maximum_retry_attempts": -1,
            "parallelization_factor": 1,
            "queues": [],
            "scaling_config": [],
            "self_managed_event_source": [],
            "self_managed_kafka_event_source_config": [],
            "source_access_configuration": [],
            "starting_position": "LATEST",
            "starting_position_timestamp": "",
            "state": "Enabled",
            "state_transition_reason": "User action",
            "topics": [],
            "tumbling_window_in_seconds": 0,
            "uuid": "972e962e-1573-4b2c-b24c-14fa3347b641"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.shopping-carts-table.aws_dynamodb_table.es_table",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_role.iam_for_lambda",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_lambda_function.main",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.archive_file.lambda_archive",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "b705ad7a8049794388c9a5789e887219eb26e4ed",
            "output_base64sha256": "GX0GDz5d9AtIszaQC5hqhpU82RFXmidErqAbFhuNFPc=",
            "output_file_mode": null,
            "output_md5": "74c000800f30c5132bd56fec70689081",
            "output_path": "./packaged_functions/ShoppingCarts_to_kinesis_adapter.zip",
            "output_sha": "b705ad7a8049794388c9a5789e887219eb26e4ed",
            "output_size": 555,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "event_source_table/scripts/dynamo_to_kinesis_adapter",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3693445097",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "log_policy_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4063422367",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:*:*:*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:311476293586:log-group:/aws/lambda/ShoppingCarts_to_kinesis_adapter",
            "id": "/aws/lambda/ShoppingCarts_to_kinesis_adapter",
            "kms_key_id": "",
            "name": "/aws/lambda/ShoppingCarts_to_kinesis_adapter",
            "name_prefix": "",
            "retention_in_days": 1,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_custom_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter-custom-policy-doc",
            "description": "Custom Policy Document",
            "id": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter-custom-policy-doc",
            "name": "ShoppingCarts_to_kinesis_adapter-custom-policy-doc",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"dynamodb:ListStreams\",\"dynamodb:GetShardIterator\",\"dynamodb:GetRecords\",\"dynamodb:DescribeStream\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:*\",\"Sid\":\"\"},{\"Action\":[\"kinesis:PutRecords\",\"kinesis:PutRecord\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:kinesis:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JKNKU43Y4R",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.shopping-carts-table.data.aws_iam_policy_document.dynamo_to_kinesis_lambda_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter_log_policy",
            "description": "IAM policy for accessing Kinesis from a lambda",
            "id": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter_log_policy",
            "name": "ShoppingCarts_to_kinesis_adapter_log_policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\",\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAURBLPB7JJAPZRHN4J",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_for_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::311476293586:role/ShoppingCarts_to_kinesis_adapter-role-for-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2023-03-25T14:08:38Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ShoppingCarts_to_kinesis_adapter-role-for-lambda",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter-custom-policy-doc",
              "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter_log_policy"
            ],
            "max_session_duration": 3600,
            "name": "ShoppingCarts_to_kinesis_adapter-role-for-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAURBLPB7JJZV7KDA7W"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_custom_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ShoppingCarts_to_kinesis_adapter-role-for-lambda-2023032514083975960000000a",
            "policy_arn": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter-custom-policy-doc",
            "role": "ShoppingCarts_to_kinesis_adapter-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.shopping-carts-table.data.aws_iam_policy_document.dynamo_to_kinesis_lambda_policy_data",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_policy.lambda_custom_policy",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_role.iam_for_lambda",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "log_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ShoppingCarts_to_kinesis_adapter-role-for-lambda-20230325140839750500000009",
            "policy_arn": "arn:aws:iam::311476293586:policy/ShoppingCarts_to_kinesis_adapter_log_policy",
            "role": "ShoppingCarts_to_kinesis_adapter-role-for-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_policy.log_policy",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_role.iam_for_lambda",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.assume_role",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.log_policy_data"
          ]
        }
      ]
    },
    {
      "module": "module.shopping-carts-table.module.dynamo_to_kinesis_adapter",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "kinesis_event_stream": "all-event_stream"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./packaged_functions/ShoppingCarts_to_kinesis_adapter.zip",
            "function_name": "ShoppingCarts_to_kinesis_adapter",
            "handler": "main.handler",
            "id": "ShoppingCarts_to_kinesis_adapter",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter/invocations",
            "kms_key_arn": "",
            "last_modified": "2023-03-26T13:02:08.000+0000",
            "layers": [],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:311476293586:function:ShoppingCarts_to_kinesis_adapter:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::311476293586:role/ShoppingCarts_to_kinesis_adapter-role-for-lambda",
            "runtime": "ruby2.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "GX0GDz5d9AtIszaQC5hqhpU82RFXmidErqAbFhuNFPc=",
            "source_code_size": 555,
            "tags": {},
            "tags_all": {},
            "timeout": 900,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.all_event_stream.aws_kinesis_stream.all-event-stream",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.aws_iam_role.iam_for_lambda",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.archive_file.lambda_archive",
            "module.shopping-carts-table.module.dynamo_to_kinesis_adapter.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
